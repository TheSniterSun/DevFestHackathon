{"ast":null,"code":"var _jsxFileName = \"/Users/brandonpae/Desktop/DevFestHackathon/frontend/src/components/chat/TextBubble.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useState } from 'react';\n// import \"./events.css\";\nimport { useEffect } from 'react';\nimport { useContext } from 'react';\nimport axios from 'axios'; // Import Axios\n\nimport AssistantResponse from './AssistantResponse';\nimport styles from './chat.module.css';\n\n// import Button from 'react-bootstrap/Button';\n\n// this is only for rendering a text bubble\n// we should know 2 things: \n// 1. Text: Text itself\n// 2. Pos: Left or right\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction TextBubble({\n  text,\n  sender\n}) {\n  _s();\n  const response = text;\n\n  // const logoPath = '/images/secra_logo.png';\n  // const [text, setText] = useState('');\n  const baseURL = \"http://localhost:8000\"; // for local dev this is the backend server\n  // const { getCookie } = useContext(AuthContext);\n\n  const [loadingText, setLoadingText] = useState(\"Generating response...\");\n\n  /** \n  useEffect(() => {\n      let intervalId;\n       if (response === \"generating\") {\n          intervalId = setInterval(() => {\n              setLoadingText(prev => { \n                  const dotCount = (prev.match(/\\./g) || []).length;\n                  if (dotCount < 3) {\n                      return prev + \".\";\n                  } else {\n                      return \"Generating response\";\n                  }\n              });\n          }, 600);\n      }\n       return () => {\n          if (intervalId) {\n              clearInterval(intervalId);\n          }\n      };\n  }, [response]);\n  */\n\n  function renderMessage() {\n    if (sender === 'user') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.bubble} ${styles.user}`,\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 19\n      }, this);\n    } else {\n      // assistant\n      if (text === \"generating\") {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${styles.bubble} ${styles.assistant}`,\n          children: loadingText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 24\n        }, this);\n      } else if (text === \"Hello, please share any water quality concerns. I will do my best to assist you.\") {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${styles.bubble} ${styles.assistant}`,\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 24\n        }, this);\n      }\n\n      // format the solutions as a list for the user\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(AssistantResponse, {\n          response: response\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)\n      }, void 0, false);\n    }\n  }\n\n  // ONCE USER SUBMITS TEXT MESSAGE, IT SHOULD SHOW UP AS A TEXT BUBBLE ON SCREEN\n  // ALSO NEED TO SUBMIT TO DJANGO ENDPOINT\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: renderMessage()\n  }, void 0, false);\n}\n_s(TextBubble, \"XTg35DmDEEcyDSyPd3YKwtnHIiw=\");\n_c = TextBubble;\nexport default TextBubble;\nvar _c;\n$RefreshReg$(_c, \"TextBubble\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","AssistantResponse","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","TextBubble","text","sender","_s","response","baseURL","loadingText","setLoadingText","renderMessage","className","bubble","user","children","fileName","_jsxFileName","lineNumber","columnNumber","assistant","_c","$RefreshReg$"],"sources":["/Users/brandonpae/Desktop/DevFestHackathon/frontend/src/components/chat/TextBubble.js"],"sourcesContent":["import React from 'react';\nimport { useState } from 'react';\n// import \"./events.css\";\nimport { useEffect } from 'react';\nimport { useContext } from 'react';\nimport axios from 'axios'; // Import Axios\n\nimport AssistantResponse from './AssistantResponse';\n\nimport styles from './chat.module.css';\n\n// import Button from 'react-bootstrap/Button';\n\n// this is only for rendering a text bubble\n// we should know 2 things: \n// 1. Text: Text itself\n// 2. Pos: Left or right\n\nfunction TextBubble({text, sender}) {\n\n    const response = text;\n\n    // const logoPath = '/images/secra_logo.png';\n    // const [text, setText] = useState('');\n    const baseURL = \"http://localhost:8000\"; // for local dev this is the backend server\n    // const { getCookie } = useContext(AuthContext);\n\n    const [loadingText, setLoadingText] = useState(\"Generating response...\");\n\n    /** \n    useEffect(() => {\n        let intervalId;\n\n        if (response === \"generating\") {\n            intervalId = setInterval(() => {\n                setLoadingText(prev => { \n                    const dotCount = (prev.match(/\\./g) || []).length;\n                    if (dotCount < 3) {\n                        return prev + \".\";\n                    } else {\n                        return \"Generating response\";\n                    }\n                });\n            }, 600);\n        }\n\n        return () => {\n            if (intervalId) {\n                clearInterval(intervalId);\n            }\n        };\n    }, [response]);\n    */\n\n    function renderMessage() {\n        if (sender === 'user') {\n           return <div className={`${styles.bubble} ${styles.user}`}>{text}</div>;\n        }\n        else { // assistant\n            if (text === \"generating\") {\n                return <div className={`${styles.bubble} ${styles.assistant}`}>{loadingText}</div>;\n            }\n            else if (text === \"Hello, please share any water quality concerns. I will do my best to assist you.\") {\n                return <div className={`${styles.bubble} ${styles.assistant}`}>{text}</div>;\n            }\n\n            // format the solutions as a list for the user\n            return (<>\n                <AssistantResponse response={response}/>\n            </>)\n        }\n    }\n    \n    // ONCE USER SUBMITS TEXT MESSAGE, IT SHOULD SHOW UP AS A TEXT BUBBLE ON SCREEN\n    // ALSO NEED TO SUBMIT TO DJANGO ENDPOINT\n\n    return (\n        <> \n            {/* now, with using CSS module, need to change how we set className */ }\n\n            {renderMessage()}\n        </>\n    );\n}\n\nexport default TextBubble;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAChC;AACA,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,UAAU,QAAQ,OAAO;AAClC,OAAOC,KAAK,MAAM,OAAO,CAAC,CAAC;;AAE3B,OAAOC,iBAAiB,MAAM,qBAAqB;AAEnD,OAAOC,MAAM,MAAM,mBAAmB;;AAEtC;;AAEA;AACA;AACA;AACA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEA,SAASC,UAAUA,CAAC;EAACC,IAAI;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EAEhC,MAAMC,QAAQ,GAAGH,IAAI;;EAErB;EACA;EACA,MAAMI,OAAO,GAAG,uBAAuB,CAAC,CAAC;EACzC;;EAEA,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,wBAAwB,CAAC;;EAExE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAII,SAASkB,aAAaA,CAAA,EAAG;IACrB,IAAIN,MAAM,KAAK,MAAM,EAAE;MACpB,oBAAOL,OAAA;QAAKY,SAAS,EAAG,GAAEd,MAAM,CAACe,MAAO,IAAGf,MAAM,CAACgB,IAAK,EAAE;QAAAC,QAAA,EAAEX;MAAI;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IACzE,CAAC,MACI;MAAE;MACH,IAAIf,IAAI,KAAK,YAAY,EAAE;QACvB,oBAAOJ,OAAA;UAAKY,SAAS,EAAG,GAAEd,MAAM,CAACe,MAAO,IAAGf,MAAM,CAACsB,SAAU,EAAE;UAAAL,QAAA,EAAEN;QAAW;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MACtF,CAAC,MACI,IAAIf,IAAI,KAAK,kFAAkF,EAAE;QAClG,oBAAOJ,OAAA;UAAKY,SAAS,EAAG,GAAEd,MAAM,CAACe,MAAO,IAAGf,MAAM,CAACsB,SAAU,EAAE;UAAAL,QAAA,EAAEX;QAAI;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAC/E;;MAEA;MACA,oBAAQnB,OAAA,CAAAE,SAAA;QAAAa,QAAA,eACJf,OAAA,CAACH,iBAAiB;UAACU,QAAQ,EAAEA;QAAS;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC;MAAC,gBAC1C,CAAC;IACP;EACJ;;EAEA;EACA;;EAEA,oBACInB,OAAA,CAAAE,SAAA;IAAAa,QAAA,EAGKJ,aAAa,CAAC;EAAC,gBAClB,CAAC;AAEX;AAACL,EAAA,CAjEQH,UAAU;AAAAkB,EAAA,GAAVlB,UAAU;AAmEnB,eAAeA,UAAU;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}